# ISSUE-0016 FDS 扩参蒸馏与 50000 组规模化执行计划

## 状态
- In Progress

## 背景
当前仓库已打通：
- FDS 数据生成与运行闭环。
- 真实标签蒸馏训练闭环。
- FDS 与蒸馏模型推理时延对比闭环。

下一阶段目标是从 5 维输入升级到更高维（含空气/风向等参数），并推进到 50000 组规模，验证精度与时延目标在扩参场景下依然成立。

## 目标
- 建立“扩参 + 规模化数据 + Tiny MLP 蒸馏”主路线。
- 在 50000 组数据上完成训练与时延对比。
- 全程保留计划文档并按步骤更新状态。

## 验收标准
- 计划与过程文档：
  - 本文档持续更新（每个阶段有勾选状态）。
- 数据与运行：
  - 完成 50000 组 FDS 数据运行与摘要。
  - 输出真实标签及过滤后标签文件。
- 蒸馏与评估：
  - 使用 Tiny MLP（默认 64x64）完成训练。
  - 输出训练/验证指标与推理基准。
  - 输出 FDS vs BNN 时延对比报告。

## 范围
- In Scope：
  - 参数维度从 5 维逐步扩展到 10~12 维（空气/风向等）。
  - 3000 组规模化执行（可分批）。
  - Tiny MLP（64x64）主模型训练与基准。
- Out of Scope：
  - 一次性扩展到全部 FDS 支持参数。
  - ONNX/TensorRT 部署优化。
  - 完整 PINN 大规模约束建模。

## 风险
- 参数维度增加后，随机采样覆盖不足导致泛化不稳定。
- FDS 串行执行成本高，需要分批与并行策略。
- 小样本/分布漂移导致线性与 MLP 表现波动。

## 里程碑与任务拆分
- [x] M0：5 组烟雾测试跑通（FDS -> 标签 -> 蒸馏 -> 对比报告）。
- [x] M1：蒸馏主模型策略确定为 Tiny MLP 64x64（线性保留为基线）。
- [x] M1：训练脚本支持 `--hidden-dim-1/2` 与 `--select-model`。
- [x] M1：新增真实标签模型推理时延基准脚本。
- [ ] M2：扩展输入参数到 10~12 维（含空气/风向参数与编码方案）。
- [ ] M2：更新 case 采样与 FDS 输入生成脚本。
- [ ] M3：启动 50000 组 FDS 任务（分批/并行方案落地）。
- [ ] M3：生成 50000 组运行摘要与标签质量门控结果。
- [ ] M4：基于 50000 组训练 Tiny MLP 64x64 并输出指标。
- [ ] M4：输出 50000 组 FDS vs BNN 时延对比报告。
- [ ] M5：运行时长/故障率复盘，形成可复用大规模生产脚本。

## 当前基线（2026-02-25）
- 5 组基线已完成，FDS 全成功。
- Tiny MLP（64x64）已可训练，推理时延保持毫秒级（远低于 1s 目标）。
- 下一步进入 M2：扩展输入参数定义与脚本改造。
